import Popper from'popper.js';function isFunction(a){return a&&'[object Function]'==={}.toString.call(a)}var classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')},createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_extends=Object.assign||function(a){for(var c,b=1;b<arguments.length;b++)for(var d in c=arguments[b],c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d]);return a},DEFAULT_OPTIONS={container:!1,delay:0,html:!1,placement:'top',title:'',template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover focus',offset:0},Tooltip=function(){function a(b,c){classCallCheck(this,a),_initialiseProps.call(this),c=_extends({},DEFAULT_OPTIONS,c),b.jquery&&(b=b[0]),this.reference=b,this.options=c;var d='string'==typeof c.trigger?c.trigger.split(' ').filter(function(e){return-1!==['click','hover','focus'].indexOf(e)}):[];this._isOpen=!1,this._setEventListeners(b,d,c)}return createClass(a,[{key:'_create',value:function(c,d,e,f){var g=window.document.createElement('div');g.innerHTML=d.trim();var h=g.childNodes[0];h.id='tooltip_'+Math.random().toString(36).substr(2,10),h.setAttribute('aria-hidden','false');var j=g.querySelector(this.innerSelector);if(1===e.nodeType)f&&j.appendChild(e);else if(isFunction(e)){var k=e.call(c);f?j.innerHTML=k:j.innerText=k}else f?j.innerHTML=e:j.innerText=e;return h}},{key:'_show',value:function(c,d){if(this._isOpen)return this;if(this._isOpen=!0,this._tooltipNode)return this._tooltipNode.style.display='',this._tooltipNode.setAttribute('aria-hidden','false'),this.popperInstance.update(),this;var e=c.getAttribute('title')||d.title;if(!e)return this;var f=this._create(c,d.template,e,d.html);f.setAttribute('aria-describedby',f.id);var g=this._findContainer(d.container,c);this._append(f,g);var h={placement:d.placement,modifiers:{arrow:{element:this.arrowSelector}}};return d.boundariesElement&&(h.modifiers.preventOverflow={boundariesElement:d.boundariesElement}),this.popperInstance=new Popper(c,f,h),this._tooltipNode=f,this}},{key:'_hide',value:function(){return this._isOpen?(this._isOpen=!1,this._tooltipNode.style.display='none',this._tooltipNode.setAttribute('aria-hidden','true'),this):this}},{key:'_dispose',value:function(){var c=this;return this._tooltipNode&&(this._hide(),this.popperInstance.destroy(),this._events.forEach(function(d){var e=d.func,f=d.event;c.reference.removeEventListener(f,e)}),this._events=[],this._tooltipNode.parentNode.removeChild(this._tooltipNode),this._tooltipNode=null),this}},{key:'_findContainer',value:function(c,d){return'string'==typeof c?c=window.document.querySelector(c):!1===c&&(c=d.parentNode),c}},{key:'_append',value:function(c,d){d.appendChild(c)}},{key:'_setEventListeners',value:function(c,d,e){var f=this,g=[],h=[];d.forEach(function(j){switch(j){case'hover':g.push('mouseenter'),h.push('mouseleave');case'focus':g.push('focus'),h.push('blur');case'click':g.push('click'),h.push('click');}}),g.forEach(function(j){var k=function(m){!0===f._isOpen||(m.usedByTooltip=!0,f._scheduleShow(c,e.delay,e,m))};f._events.push({event:j,func:k}),c.addEventListener(j,k)}),h.forEach(function(j){var k=function(m){!0===m.usedByTooltip||f._scheduleHide(c,e.delay,e,m)};f._events.push({event:j,func:k}),c.addEventListener(j,k)})}},{key:'_scheduleShow',value:function(c,d,e){var f=this,g=d&&d.show||d||0;window.setTimeout(function(){return f._show(c,e)},g)}},{key:'_scheduleHide',value:function(c,d,e,f){var g=this,h=d&&d.hide||d||0;window.setTimeout(function(){if(!1!==g._isOpen&&document.body.contains(g._tooltipNode)){if('mouseleave'===f.type){var j=g._setTooltipNodeEvent(f,c,d,e);if(j)return}g._hide(c,e)}},h)}}]),a}(),_initialiseProps=function(){var b=this;this.show=function(){return b._show(b.reference,b.options)},this.hide=function(){return b._hide()},this.dispose=function(){return b._dispose()},this.toggle=function(){return b._isOpen?b.hide():b.show()},this.arrowSelector='.tooltip-arrow, .tooltip__arrow',this.innerSelector='.tooltip-inner, .tooltip__inner',this._events=[],this._setTooltipNodeEvent=function(c,d,e,f){var g=c.relatedreference||c.toElement;return!!b._tooltipNode.contains(g)&&(b._tooltipNode.addEventListener(c.type,function j(k){var l=k.relatedreference||k.toElement;b._tooltipNode.removeEventListener(c.type,j),d.contains(l)||b._scheduleHide(d,f.delay,f,k)}),!0)}};export default Tooltip;

//# sourceMappingURL=tooltip.min.js.map